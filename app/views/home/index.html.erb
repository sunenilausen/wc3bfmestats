<div>
  <div class="flex items-center justify-between">
    <h1 class="font-bold text-4xl">BfME Stats</h1>
    <% if current_user&.admin? %>
      <%= form_with url: sync_path, method: :post, class: "flex items-center gap-2" do |f| %>
        <%= f.number_field :limit, value: 1, min: 1, max: 100, class: "w-20 rounded-md border border-gray-300 px-2 py-2 text-sm" %>
        <%= f.submit "Sync", class: "rounded-md px-3.5 py-2.5 bg-blue-600 hover:bg-blue-500 text-white font-medium cursor-pointer" %>
      <% end %>
    <% end %>
  </div>

  <div class="mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
    <div class="bg-white rounded-lg shadow p-6 border border-gray-200">
      <h2 class="text-sm font-medium text-gray-500 uppercase tracking-wider">Matches</h2>
      <p class="mt-2 text-3xl font-bold text-blue-600"><%= @matches_count %></p>
    </div>

    <div class="bg-white rounded-lg shadow p-6 border border-gray-200">
      <h2 class="text-sm font-medium text-gray-500 uppercase tracking-wider">Players</h2>
      <p class="mt-2 text-3xl font-bold text-blue-600"><%= @players_count %></p>
    </div>

    <div class="bg-white rounded-lg shadow p-6 border border-gray-200">
      <h2 class="text-sm font-medium text-gray-500 uppercase tracking-wider">Observers</h2>
      <p class="mt-2 text-3xl font-bold text-blue-600"><%= @observers_count %></p>
    </div>

    <div class="bg-white rounded-lg shadow p-6 border border-gray-200">
      <h2 class="text-sm font-medium text-gray-500 uppercase tracking-wider">Underdog Win Rate</h2>
      <p class="mt-2 text-3xl font-bold text-blue-600"><%= @underdog_stats[:percentage] %>%</p>
      <p class="mt-1 text-sm text-gray-500">
        <%= @underdog_stats[:underdog_wins] %> of <%= @underdog_stats[:total_matches] %> matches won by lower ELO team
      </p>
    </div>

    <div class="bg-white rounded-lg shadow p-6 border border-gray-200">
      <h2 class="text-sm font-medium text-gray-500 uppercase tracking-wider">Good vs Evil</h2>
      <div class="mt-2 flex items-baseline gap-2">
        <span class="text-2xl font-bold text-green-600"><%= @good_vs_evil_stats[:good_percentage] %>%</span>
        <span class="text-gray-400">vs</span>
        <span class="text-2xl font-bold text-red-600"><%= @good_vs_evil_stats[:evil_percentage] %>%</span>
      </div>
      <p class="mt-1 text-sm text-gray-500">
        <span class="text-green-600"><%= @good_vs_evil_stats[:good_wins] %> Good</span> /
        <span class="text-red-600"><%= @good_vs_evil_stats[:evil_wins] %> Evil</span>
        wins (<%= @good_vs_evil_stats[:total] %> matches)
      </p>
    </div>
  </div>
</div>
