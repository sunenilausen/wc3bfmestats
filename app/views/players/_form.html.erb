<%= simple_form_for(@player) do |f| %>
  <%= f.error_notification %>
  <%= f.error_notification message: f.object.errors[:base].to_sentence if f.object.errors[:base].present? %>

  <% input_class = "mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500" %>
  <% label_class = "block text-sm font-medium text-gray-700" %>
  <% hint_class = "mt-1 text-sm text-gray-500" %>

  <div class="space-y-8">
    <%# Identity Section %>
    <div>
      <h3 class="font-semibold text-gray-700 mb-4 text-lg border-b pb-2">Identity</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <%= f.input :nickname, label_html: { class: label_class }, input_html: { class: input_class }, hint_html: { class: hint_class } %>
        <%= f.input :alternative_name, label_html: { class: label_class }, input_html: { class: input_class }, hint: "Romanized name, alias, etc.", hint_html: { class: hint_class } %>
      </div>
    </div>

    <%# Battle.net Section %>
    <div>
      <h3 class="font-semibold text-gray-700 mb-4 text-lg border-b pb-2">Battle.net</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <%= f.input :battletag, label_html: { class: label_class }, input_html: { class: input_class }, hint: "Full battletag (e.g. Player#1234)", hint_html: { class: hint_class } %>
        <%= f.input :region,
            collection: ["NA", "EU", "KR", "CN"],
            include_blank: "Unknown",
            label_html: { class: label_class },
            input_html: { class: input_class } %>
      </div>
    </div>

    <%# Rating Seeds Section %>
    <div>
      <h3 class="font-semibold text-gray-700 mb-2 text-lg border-b pb-2">Rating Seeds</h3>
      <p class="text-sm text-gray-500 mb-4">Initial ratings used when recalculating. Change these to adjust a player's starting point.</p>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <%= f.input :custom_rating_seed, label: "CR Seed", label_html: { class: label_class }, input_html: { class: input_class, type: "number" }, hint: "Default: 1300", hint_html: { class: hint_class } %>
        <%= f.input :elo_rating_seed, label: "ELO Seed", label_html: { class: label_class }, input_html: { class: input_class, type: "number" }, hint: "Default: 1200", hint_html: { class: hint_class } %>
        <%= f.input :glicko2_rating_seed, label: "Glicko-2 Seed", label_html: { class: label_class }, input_html: { class: input_class, type: "number" }, hint: "Default: 1500", hint_html: { class: hint_class } %>
      </div>
    </div>

    <%# Current Ratings (Read-only) %>
    <div>
      <h3 class="font-semibold text-gray-700 mb-2 text-lg border-b pb-2">Current Ratings</h3>
      <p class="text-sm text-gray-500 mb-4">Calculated automatically. Cannot be edited directly.</p>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-3 text-sm">
        <div>
          <span class="text-gray-500 block">Custom Rating</span>
          <span class="font-semibold text-lg"><%= @player.custom_rating&.round || "-" %></span>
        </div>
        <div>
          <span class="text-gray-500 block">ML Score</span>
          <span class="font-semibold text-lg"><%= @player.ml_score || "-" %></span>
        </div>
        <div>
          <span class="text-gray-500 block">Games Played</span>
          <span class="font-semibold text-lg"><%= @player.custom_rating_games_played || 0 %></span>
        </div>
        <div>
          <span class="text-gray-500 block">Bonus Wins Left</span>
          <span class="font-semibold text-lg"><%= @player.custom_rating_bonus_wins || 0 %></span>
        </div>
        <div>
          <span class="text-gray-500 block">ELO Rating</span>
          <span class="font-semibold text-lg"><%= @player.elo_rating&.round || "-" %></span>
        </div>
        <div>
          <span class="text-gray-500 block">Glicko-2</span>
          <span class="font-semibold text-lg"><%= @player.glicko2_rating&.round || "-" %></span>
        </div>
        <div>
          <span class="text-gray-500 block">Glicko-2 RD</span>
          <span class="font-semibold text-lg"><%= @player.glicko2_rating_deviation&.round || "-" %></span>
        </div>
        <div>
          <span class="text-gray-500 block">Reached 2000</span>
          <span class="font-semibold text-lg"><%= @player.custom_rating_reached_2000? ? "Yes" : "No" %></span>
        </div>
      </div>
    </div>
  </div>

  <div class="mt-8">
    <%= f.button :submit, "Save Changes", class: "rounded-md px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white font-medium cursor-pointer" %>
  </div>
<% end %>
